<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SolVer - Sudoku Solver</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background-color: #000;
        color: #fff;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      header {
        background-color: #000;
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid #333;
      }

      .logo {
        font-size: 2.5rem;
        font-weight: bold;
        letter-spacing: 2px;
        color: #fff;
      }

      main {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px 20px;
      }

      .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 40px;
        max-width: 1200px;
        width: 100%;
      }

      .grid-container {
        background-color: #111;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
        flex: 1;
        min-width: 300px;
        max-width: 450px;
      }

      .grid-title {
        text-align: center;
        margin-bottom: 15px;
        font-size: 1.2rem;
        color: #fff;
      }

      .sudoku-grid {
        display: grid;
        grid-template-columns: repeat(9, 1fr);
        grid-template-rows: repeat(9, 1fr);
        gap: 1px;
        background-color: #333;
        border: 2px solid #333;
        margin: 0 auto;
        width: 100%;
        max-width: 400px;
        aspect-ratio: 1 / 1;
      }

      .cell {
        background-color: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2rem;
        font-weight: bold;
        color: #fff;
        border: 1px solid #333;
        user-select: none;
      }

      .cell:nth-child(3n) {
        border-right: 2px solid #fff;
      }

      .cell:nth-child(9n) {
        border-right: 1px solid #333;
      }

      .sudoku-grid .cell:nth-child(n + 19):nth-child(-n + 27),
      .sudoku-grid .cell:nth-child(n + 46):nth-child(-n + 54) {
        border-bottom: 2px solid #fff;
      }

      .input-cell {
        width: 100%;
        height: 100%;
        text-align: center;
        font-size: 1.2rem;
        font-weight: bold;
        background-color: #000;
        color: #fff;
        border: none;
        outline: none;
      }

      .input-cell:focus {
        background-color: #222;
      }

      .buttons {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
      }

      button {
        background-color: #fff;
        color: #000;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      button:hover {
        background-color: #ddd;
        transform: translateY(-2px);
      }

      button:active {
        transform: translateY(0);
      }

      .solved-cell {
        color: #4caf50;
      }

      footer {
        text-align: center;
        padding: 20px;
        color: #888;
        font-size: 0.9rem;
        border-top: 1px solid #333;
      }

      @media (max-width: 768px) {
        .container {
          flex-direction: column;
          align-items: center;
        }

        .grid-container {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo">solVer</div>
    </header>

    <main>
      <div class="container">
        <div class="grid-container">
          <h2 class="grid-title">Input Sudoku</h2>
          <div class="sudoku-grid" id="input-grid"></div>
          <div class="buttons">
            <button id="solve-btn">Solve</button>
            <button id="clear-btn">Clear</button>
          </div>
        </div>

        <div class="grid-container">
          <h2 class="grid-title">Solution</h2>
          <div class="sudoku-grid" id="solution-grid"></div>
          <div class="buttons">
            <button id="reset-btn">Reset</button>
          </div>
        </div>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const gridSize = 9;
        let inputBoard = Array(9)
          .fill()
          .map(() => Array(9).fill(0));
        let solutionBoard = Array(9)
          .fill()
          .map(() => Array(9).fill(0));

        const inputGrid = document.getElementById("input-grid");
        createGrid(inputGrid, true);

        const solutionGrid = document.getElementById("solution-grid");
        createGrid(solutionGrid, false);

        document
          .getElementById("solve-btn")
          .addEventListener("click", solveSudoku);
        document
          .getElementById("clear-btn")
          .addEventListener("click", clearInput);
        document
          .getElementById("reset-btn")
          .addEventListener("click", resetSolution);

        function createGrid(container, isInput) {
          container.innerHTML = "";

          for (let i = 0; i < gridSize; i++) {
            for (let j = 0; j < gridSize; j++) {
              const cell = document.createElement("div");
              cell.className = "cell";
              cell.dataset.row = i;
              cell.dataset.col = j;

              if (isInput) {
                const input = document.createElement("input");
                input.type = "text";
                input.className = "input-cell";
                input.maxLength = 1;
                input.addEventListener("input", function (e) {
                  const value = e.target.value;
                  if (/^[1-9]$/.test(value)) {
                    inputBoard[i][j] = parseInt(value);
                  } else {
                    inputBoard[i][j] = 0;
                    e.target.value = "";
                  }
                });
                cell.appendChild(input);
              } else {
                cell.textContent = "";
              }

              container.appendChild(cell);
            }
          }
        }

        function checkRow(board, row, number) {
          for (let i = 0; i < gridSize; i++) {
            if (board[row][i] === number) {
              return true;
            }
          }
          return false;
        }

        function checkCol(board, column, number) {
          for (let i = 0; i < gridSize; i++) {
            if (board[i][column] === number) {
              return true;
            }
          }
          return false;
        }

        function checkBox(board, row, column, number) {
          const currentRow = row - (row % 3);
          const currentCol = column - (column % 3);

          for (let i = currentRow; i < currentRow + 3; i++) {
            for (let j = currentCol; j < currentCol + 3; j++) {
              if (board[i][j] === number) {
                return true;
              }
            }
          }
          return false;
        }

        function isValid(board, row, column, number) {
          return (
            !checkBox(board, row, column, number) &&
            !checkCol(board, column, number) &&
            !checkRow(board, row, number)
          );
        }

        function solver(board) {
          for (let row = 0; row < gridSize; row++) {
            for (let col = 0; col < gridSize; col++) {
              if (board[row][col] === 0) {
                for (let number = 1; number <= gridSize; number++) {
                  if (isValid(board, row, col, number)) {
                    board[row][col] = number;

                    if (solver(board)) {
                      return true;
                    } else {
                      board[row][col] = 0;
                    }
                  }
                }
                return false;
              }
            }
          }
          return true;
        }

        function solveSudoku() {
          for (let i = 0; i < gridSize; i++) {
            solutionBoard[i] = [...inputBoard[i]];
          }

          if (solver(solutionBoard)) {
            displaySolution();
          } else {
            alert("This Sudoku cannot be solved!");
          }
        }

        function displaySolution() {
          const cells = solutionGrid.querySelectorAll(".cell");

          for (let i = 0; i < gridSize; i++) {
            for (let j = 0; j < gridSize; j++) {
              const index = i * gridSize + j;

              cells[index].textContent = solutionBoard[i][j] || "";

              if (inputBoard[i][j] === 0 && solutionBoard[i][j] !== 0) {
                cells[index].classList.add("solved-cell");
              } else {
                cells[index].classList.remove("solved-cell");
              }
            }
          }
        }

        function clearInput() {
          const inputs = inputGrid.querySelectorAll(".input-cell");
          inputs.forEach((input) => {
            input.value = "";
          });

          inputBoard = Array(9)
            .fill()
            .map(() => Array(9).fill(0));
          resetSolution();
        }

        function resetSolution() {
          const cells = solutionGrid.querySelectorAll(".cell");
          cells.forEach((cell) => {
            cell.textContent = "";
            cell.classList.remove("solved-cell");
          });

          solutionBoard = Array(9)
            .fill()
            .map(() => Array(9).fill(0));
        }
      });
    </script>
  </body>
</html>
